<div *ngIf="playlist" id="playlistDetailsContainer" class="contentPanel">

    <app-toolbar [height]="'40px'" [margin]="'0 0 0 2px'" [padding]="'0 0 0 15px'">
        <div class="name noOverflow">{{ playlist?.title }}</div>
        <div class="length noOverflow">{{ playlist?.videolist?.length }} track<span *ngIf="playlist.videolist.length >1">s</span></div>
        <div class="duration noOverflow">{{ playlist?.videolist | totalduration | duration }}</div>

        <div class="flexSpacer"></div>

        <button class="toolbarBtn miniBtn btnHover" [matMenuTriggerFor]="menu">
            <fa class="menuBtnIco" [name]="'bars'" [size]="2"></fa>
        </button>

        <mat-menu #menu="matMenu" overlapTrigger="false">

            <!-- Play -->
            <button mat-menu-item (click)="playPlaylist()">
                <mat-icon svgIcon="playlist-play"></mat-icon>
                <span>Play all</span>
            </button>

            <!-- Add to current -->
            <button mat-menu-item (click)="addToCurrentPlaylist()">
                <mat-icon svgIcon="playlist-plus"></mat-icon>
                <span>Add to player list</span>
            </button>

            <!-- Edit -->
            <button mat-menu-item (click)="editPlaylist()">
                <mat-icon svgIcon="pencil"></mat-icon>
                <span>Edit infos</span>
            </button>

            <!-- Remove -->
            <button mat-menu-item (click)="deletePlaylist()" >
                <mat-icon svgIcon="delete-forever"></mat-icon>
                <span>Delete</span>
            </button>
        </mat-menu>
    </app-toolbar>

    <div class="spacer"></div>

    <div class="scrollContainer plScrollContainer" #pldScrollContainer>
        <!-- Video list -->
        <app-video-list
            [draggable]="true"
            [videoList]="playlist.videolist"
            [displayType]="'list'"
            [dragBagName]="'searchResultsBag'"
            [attrCopy]="false"
            [attrAcceptDrop]="true"
            [attrPlaylistId]="playlist.id"
            [attrFrom]="'detail'"
            [showShadow]="true">

            <!-- Item control buttons -->
            <ng-template #itemControl let-video="video" let-index="index">
                <button class="toolbarBtn btnHover"
                    [matMenuTriggerFor]="menuDetail" xPosition="'before'" yPosition="'above'">
                    <fa [name]="'bars'" [size]="2"></fa>
                </button>
                <mat-menu #menuDetail="matMenu">
                    <button mat-menu-item (click)="playVideo(video)">
                        <mat-icon svgIcon="play-circle-outline"></mat-icon>
                        <span>Play</span>
                    </button>
                    <button mat-menu-item (click)="addToQueue(video)">
                        <mat-icon svgIcon="library-plus"></mat-icon>
                        <span>Add to player list</span>
                    </button>
                    <button mat-menu-item (click)="addToPlaylist(video)">
                        <mat-icon svgIcon="playlist-plus"></mat-icon>
                        <span>Copy to playlist(s)</span>
                    </button>
                </mat-menu>

                <button class="toolbarBtn btnHover" (click)="deleteVideo(video, index)">
                    <fa [name]="'trash-o'" [size]="2"></fa>
                </button>
            </ng-template>
        </app-video-list>
    </div>
</div>